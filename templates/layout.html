
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Control de Pagos TECNOENLACE</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.bg-app { background: #0b1220; } .card { background: linear-gradient(180deg,#0f1724,#0b1220); }</style>
</head>
<body class="bg-app text-slate-100 min-h-screen">
<nav class="bg-gray-900/80 sticky top-0 z-30">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-14">
      <div class="flex items-center gap-3">
        <button id="menuBtn" class="p-2 rounded-md hover:bg-gray-800/50 md:hidden">☰</button>
        <a href="{{ url_for('dashboard') }}" class="font-semibold text-lg">TECNOENLACE - Control de Pagos</a>
      </div>
      <div class="flex items-center gap-3">
        {% if session.get('logged_in') %}
          <a href="{{ url_for('export_excel') }}" class="px-3 py-1 rounded bg-sky-600 hover:bg-sky-500">Exportar</a>
          <a href="{{ url_for('logout') }}" class="px-3 py-1 rounded bg-rose-600 hover:bg-rose-500">Cerrar sesión</a>
        {% else %}
          <a href="{{ url_for('login') }}" class="px-3 py-1 rounded bg-sky-600 hover:bg-sky-500">Iniciar sesión</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <div class="grid md:grid-cols-4 gap-6">
    <aside id="sidebar" class="md:col-span-1 card p-4 rounded-md hidden md:block">
      <div class="mb-4"><a class="block font-bold" href="{{ url_for('dashboard') }}">Panel</a></div>
      {% if session.get('logged_in') %}
      <nav class="flex flex-col gap-2 text-sm">
        <a href="{{ url_for('clientes') }}" class="px-2 py-1 rounded hover:bg-gray-800">Clientes</a>
        <a href="{{ url_for('pagos') }}" class="px-2 py-1 rounded hover:bg-gray-800">Pagos</a>
      </nav>
      {% endif %}
    </aside>
    <main class="md:col-span-3">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="mb-3 p-3 rounded {{ 'bg-green-700' if category=='success' else 'bg-red-700' }}">{{ msg }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>
  </div>
</div>
<script>
  const btn = document.getElementById('menuBtn');
  const sidebar = document.getElementById('sidebar');
  if(btn){ btn.addEventListener('click', ()=>{ sidebar.classList.toggle('hidden'); }); }
</script>
</body>
</html>
