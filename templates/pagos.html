{% extends "layout.html" %}
{% block content %}
<h2>Registro de Pagos</h2>

<form method="POST" action="{{ url_for('nuevo_pago') }}" class="form">
    <label>Cliente:</label>
    <select name="cliente_id" required>
        {% for c in clientes %}
        <option value="{{ c['id'] }}">{{ c['nombre'] }}</option>
        {% endfor %}
    </select>

    <label>Monto:</label>
    <input type="number" name="monto" step="0.01" required>

    <label>Fecha:</label>
    <input type="date" name="fecha" required>

    <label>Mes:</label>
    <input type="text" name="mes" placeholder="Ej: Octubre 2025" required>

    <button type="submit">Registrar Pago</button>
</form>

<h3>Lista de Pagos</h3>
<table>
    <tr>
        <th>ID</th>
        <th>Cliente</th>
        <th>Monto</th>
        <th>Fecha</th>
        <th>Mes</th>
        <th>Acciones</th>
    </tr>
    {% for p in pagos %}
    <tr>
        <td>{{ p['id'] }}</td>
        <td>{{ p['nombre'] }}</td>
        <td>${{ p['monto'] }}</td>
        <td>{{ p['fecha'] }}</td>
        <td>{{ p['mes'] }}</td>
        <td>
            <a href="{{ url_for('borrar_pago', id=p['id']) }}" class="btn delete">Eliminar</a>
        </td>
    </tr>
    {% endfor %}
</table>

<div class="export-buttons">
    <a href="{{ url_for('exportar_excel') }}" class="btn success">Exportar Excel</a>
    <a href="{{ url_for('exportar_pdf') }}" class="btn info">Exportar PDF</a>
</div>
{% endblock %}
